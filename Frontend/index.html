<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CHAVOSH</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#e5ddd5; display:flex; flex-direction:column; height:100vh; }
    #chatContainer { display:none; flex-direction:column; height:100vh; }
    header { background:#2aabee; color:white; padding:10px; font-size:18px; display:flex; justify-content:space-between; align-items:center; }
    #subtitle { font-size:12px; opacity:0.9; }
    #adminArea a { color:#fff; text-decoration:underline; font-size:12px; }
    #chat { flex:1; overflow-y:auto; padding:10px; }
    .message-wrapper { margin:8px 0; display:flex; flex-direction:column; }
    .message-wrapper.me { align-items:flex-end; }
    .author { font-size:12px; color:#555; margin-bottom:2px; }
    .message { background:#fff; padding:8px 12px; border-radius:8px; max-width:70%; word-wrap:break-word; }
    .message.me { background:#dcf8c6; }
    .message-meta { font-size:10px; color:#777; margin-top:2px; }
    .file-chip { display:flex; align-items:center; gap:8px; }
    .file-icon { background:#e3f3ff; padding:4px; border-radius:4px; }
    .file-name a { color:#0a66c2; text-decoration:underline; }
    .composer { padding:10px; background:#f0f0f0; }
    .composer-bar { display:flex; gap:8px; }
    .input { flex:1; min-height:40px; max-height:120px; overflow:auto; background:white; border:1px solid #ccc; border-radius:6px; padding:6px; }
    .btn { padding:6px 10px; border:none; border-radius:4px; cursor:pointer; }
    .btn.primary { background:#2aabee; color:white; }
    .btn.secondary { background:#ddd; }
    #progressRow { display:none; align-items:center; gap:8px; margin-top:4px; }
    .progress { flex:1; height:6px; background:#ccc; border-radius:3px; overflow:hidden; }
    .bar { height:100%; background:#2aabee; width:0%; }
    #contextMenu { position:absolute; display:none; list-style:none; margin:0; padding:4px 0; background:#fff; border:1px solid #ccc; border-radius:6px; box-shadow:0 2px 8px rgba(0,0,0,0.15); z-index:1000; }
    #contextMenu li { padding:6px 16px; cursor:pointer; }
    #contextMenu li:hover { background:#eee; }
    #blankOverlay { position: fixed; inset: 0; background: #fff; display: none; align-items: center; justify-content: center; z-index: 3000; font-size: 18px; font-weight: bold; color: #333; }
    #loginBox { display:flex; flex-direction:column; align-items:center; justify-content:center; margin: 20px auto; gap:12px; }
    #loginBox input { padding:8px; border-radius:4px; border:1px solid #ccc; width:200px; }
    #adminArea { margin-left: 8px; }
  </style>
</head>
<body>

<div id="blankOverlay">Awaiting admin approval...</div>

<div id="loginBox">
  <!-- Google Sign-In -->
  <div id="g_id_onload"
       data-client_id="175338462827-bq5vp6m3km0fs20hsfmvugm2m0ptu5gp.apps.googleusercontent.com"
       data-callback="handleGoogleLogin"
       data-auto_prompt="false">
  </div>
  <div class="g_id_signin"
       data-type="standard"
       data-size="large"
       data-theme="outline"
       data-text="sign_in_with"
       data-shape="rect"
       data-logo_alignment="left">
  </div>

  <!-- Local Login -->
  <div style="margin-top: 20px; text-align: center;">
    <h4>Or use local login</h4>
    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />
    <div style="margin-top: 8px;">
      <button onclick="register()" class="btn primary">Register</button>
      <button onclick="login()" class="btn secondary">Login</button>
    </div>
  </div>
</div>

<!-- Chat UI (hidden until approved) -->
<div id="chatContainer">
  <header>
    <div>CHAVOSH Chat Box</div>
    <div id="subtitle">Please sign in</div>
    <div id="adminArea"></div>
  </header>

  <main id="chat"></main>

  <div class="composer">
    <div class="composer-bar">
      <button class="btn secondary" id="attachBtn">ðŸ“Ž</button>
      <input type="file" id="fileInput" style="display:none" />
      <div id="input" class="input" contenteditable="true" data-placeholder="Type a messageâ€¦"></div>
      <button class="btn primary" id="sendBtn">Send</button>
      <button class="btn secondary" id="clearBtn">ðŸ§¹</button>
    </div>
    <div id="progressRow">
      <div class="progress"><div class="bar" id="progressBar"></div></div>
      <div id="progressPct">0%</div>
    </div>
  </div>
</div>

<ul id="contextMenu">
  <li data-action="delete">ðŸ—‘ Delete</li>
  <li data-action="copy">ðŸ“‹ Copy</li>
  <li data-action="save">ðŸ’¾ Save file</li>
</ul>

<script src="script.js"></script>
</body>
</html>

